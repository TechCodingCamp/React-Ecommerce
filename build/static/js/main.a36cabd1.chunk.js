(this.webpackJsonpchatapplciation=this.webpackJsonpchatapplciation||[]).push([[0],{58:function(e,t,a){},67:function(e,t,a){},73:function(e,t,a){},79:function(e,t,a){},80:function(e,t,a){},83:function(e,t,a){},84:function(e,t,a){},85:function(e,t,a){"use strict";a.r(t);var s=a(0),i=a.n(s),n=a(12),c=a.n(n),o=a(38),r=a(16),l=a(17),d=a(19),p=a(18),m=a(26),h=a(11),u=a(113),b=(a(67),a(119)),g=a(2),j=function(e){Object(d.a)(a,e);var t=Object(p.a)(a);function a(){return Object(r.a)(this,a),t.apply(this,arguments)}return Object(l.a)(a,[{key:"render",value:function(){return Object(g.jsxs)(u.a,{container:!0,component:"main",className:"root",children:[Object(g.jsx)(u.a,{item:!0,xs:1,sm:4,md:7,className:"imagehome",children:Object(g.jsx)("div",{className:"homeleftimage"})}),Object(g.jsxs)(u.a,{item:!0,xs:12,sm:8,md:5,className:"homerightcomponent",elevation:6,square:!0,children:[Object(g.jsx)(b.a,{className:"homeitem1",children:Object(g.jsx)("button",{class:"btnhome",children:Object(g.jsx)("i",{class:"fa fa-home",children:"Welcome"})})}),Object(g.jsxs)("div",{style:{display:"flex",flexDirection:"column",alignItems:"center",paddingLeft:"10px",paddingRight:"10px",marginTop:"60px"},children:[Object(g.jsx)("h1",{style:{color:"white",backgroundColor:"pink",padding:"10px 10px"},children:"Web Chat Application"}),Object(g.jsx)(m.b,{to:"/signin",children:Object(g.jsx)("button",{class:"button1",children:Object(g.jsx)("span",{children:"Login"})})})]})]})]})}}]),a}(i.a.Component),f=a(20),x=(a(73),{ID:"id",PhotoURL:"photoUrl",Name:"nickname",Email:"email",Password:"image/",DOC:"added",Description:"mydescription",FirebaseDocumentId:"docid",UPLOAD_CHANGED:"state_changed",PREFIX_IMAGE:"image/",CurrentUserdocKey:""}),O=a(118),v=a(30),S=a.n(v),w=a(6);a(74),a(75),a(77);w.a.initializeApp({apiKey:"AIzaSyCtx7hADwTRxs_5MVBtc9eWrjcqMYit8cw",authDomain:"react-applciation.firebaseapp.com",projectId:"react-applciation",storageBucket:"react-applciation.appspot.com",messagingSenderId:"149710829843",appId:"1:149710829843:web:8b7ab11728dd8b226402e6",measurementId:"G-L33PRCRBLY"});var k=w.a,L=(a(57),function(e){Object(d.a)(a,e);var t=Object(p.a)(a);function a(e){var s;return Object(r.a)(this,a),(s=t.call(this,e)).onChangeNickname=function(e){s.setState({name:e.target.value})},s.onChangeAboutMe=function(e){s.setState({aboutMe:e.target.value})},s.onChangeAvatar=function(e){if(e.target.files&&e.target.files[0]){if(0!==e.target.files[0].type.toString().indexOf(x.PREFIX_IMAGE))return void s.props.showToast(0,"This. file is not an image");s.newPhoto=e.target.files[0],s.setState({photoUrl:URL.createObjectURL(e.target.files[0])})}else s.props.showToast(0,"Something wrong with input file")},s.updateInfo=function(){if(s.setState({isLoading:!0}),s.newPhoto){var e=k.storage().ref().child(s.state.id).put(s.newPhoto);e.on(x.UPLOAD_CHANGED,null,(function(e){s.props.showToast(0,e.message)}),(function(){e.snapshot.ref.getDownloadURL().then((function(e){s.updateUserInfo(!0,e),s.setState({isLoading:!0})}))}))}else s.updateUserInfo(!1,null)},s.updateUserInfo=function(e,t){var a;a=e?{name:s.state.name,description:s.state.aboutMe,URL:t}:{name:s.state.name,description:s.state.aboutMe},k.firestore().collection("users").doc(s.state.documentKey).update(a).then((function(a){localStorage.setItem(x.Name,s.state.name),localStorage.setItem(x.Description,s.state.aboutMe),e&&localStorage.setItem(x.PhotoURL,t),s.setState({isLoading:!1}),s.props.showToast(1,"Update Info Success")}))},s.state={isLoading:!1,documentKey:localStorage.getItem(x.FirebaseDocumentId),id:localStorage.getItem(x.ID),photoUrl:localStorage.getItem(x.PhotoURL),name:localStorage.getItem(x.Name),aboutMe:localStorage.getItem(x.Description)},s.newPhoto=null,s.newPhotoUrl="",s.onChangeNickname=s.onChangeNickname.bind(Object(f.a)(s)),s.onChangeAvatar=s.onChangeAvatar.bind(Object(f.a)(s)),s.onChangeAboutMe=s.onChangeAboutMe.bind(Object(f.a)(s)),s.updateInfo=s.updateInfo.bind(Object(f.a)(s)),s}return Object(l.a)(a,[{key:"render",value:function(){var e=this;return Object(g.jsxs)(u.a,{container:!0,component:"main",className:"root",children:[Object(g.jsx)(u.a,{item:!0,xs:1,sm:4,md:7,className:"image",children:Object(g.jsx)("div",{className:"leftimage",children:this.state.isLoading?Object(g.jsx)("div",{className:"viewLoadingProfile",children:Object(g.jsx)(S.a,{type:"spin",color:"pink",height:"10%",width:"10%"})}):null})}),Object(g.jsxs)(u.a,{item:!0,xs:12,sm:8,md:5,className:"loginrightcomponent",elevation:6,square:!0,children:[Object(g.jsx)(b.a,{style:{display:"flex",flexDirection:"column",alignItems:"center",width:"100%",boxShadow:"0 5px 5px #808888"},children:Object(g.jsx)("button",{class:"btnhome",children:"Profile"})}),Object(g.jsxs)("div",{style:{display:"flex",flexDirection:"column",alignItems:"center",paddingLeft:"10px",paddingRight:"10px",marginTop:"10px"},children:[Object(g.jsx)("img",{className:"avatar",alt:"",src:this.state.photoUrl?this.state.photoUrl:"https://firebasestorage.googleapis.com/v0/b/react-applciation.appspot.com/o/nopic.jpg?alt=media&token=d375ecd2-5905-4dee-8185-b351701915d0"}),Object(g.jsxs)("div",{className:"viewWrapInputFile",children:[Object(g.jsx)("img",{className:"imgInputFile",alt:"icon gallery",src:"https://firebasestorage.googleapis.com/v0/b/react-applciation.appspot.com/o/ic_input_file.png?alt=media&token=3739dda6-5cdd-48f1-90e9-efe37fe66df3",onClick:function(){e.refInput.click()}}),Object(g.jsx)("input",{ref:function(t){e.refInput=t},accept:"image/*",className:"viewInputFile",type:"file",onChange:this.onChangeAvatar})]}),Object(g.jsx)(O.a,{variant:"outlined",margin:"normal",fullWidth:!0,id:"name",label:"Name",name:"name",autoFocus:!0,onChange:this.onChangeNickName,value:this.state.name?this.state.name:""}),Object(g.jsx)(O.a,{variant:"outlined",margin:"normal",fullWidth:!0,id:"description",label:"Status",name:"description",autoFocus:!0,onChange:this.onChangeAboutMe,value:this.state.aboutMe?this.state.aboutMe:""}),Object(g.jsxs)("div",{children:[Object(g.jsx)("button",{className:"button1",onClick:this.updateInfo,children:Object(g.jsx)("span",{children:"Update"})}),Object(g.jsx)("button",{className:"button1",onClick:function(){e.props.history.push("/chat")},children:"back"})]})]})]})]})}}]),a}(i.a.Component)),I=a(24),N=a.n(I),y=a(59),C=a(31),U=(a(79),a(80),function(e){Object(d.a)(a,e);var t=Object(p.a)(a);function a(e){return Object(r.a)(this,a),t.call(this,e)}return Object(l.a)(a,[{key:"render",value:function(){return Object(g.jsxs)("div",{className:"viewWelcomeBoard",children:[Object(g.jsx)("img",{className:"avatarWelcome",src:this.props.currentUserPhoto?this.props.currentUserPhoto:"https://firebasestorage.googleapis.com/v0/b/react-applciation.appspot.com/o/nopic.jpg?alt=media&token=d375ecd2-5905-4dee-8185-b351701915d0",alt:""}),Object(g.jsx)("span",{className:"textTitleWelcome",children:"Welcome,".concat(this.props.currentUserName)}),Object(g.jsx)("span",{className:"textDescriptionWelcome",children:"Start Chatting"})]})}}]),a}(i.a.Component)),P=(a(58),a(81),a(39)),M=a.n(P),D=function(e){Object(d.a)(a,e);var t=Object(p.a)(a);function a(e){var s;return Object(r.a)(this,a),(s=t.call(this,e)).scrollToBottom=function(){s.messagesEnd&&s.messagesEnd.scrollIntoView({})},s.onKeyboardPress=function(e){"Enter"===e.key&&s.onSendMessage(s.state.inputValue,0)},s.openListSticker=function(){s.setState({isShowSticker:!s.state.isShowSticker})},s.getListHistory=function(){s.removeListener&&s.removeListener(),s.listMessage.length=0,s.setState({isLoading:!0}),s.hashString(s.currentUserId)<=s.hashString(s.state.currentPeerUser.id)?s.groupChatId="".concat(s.currentUserId,"-").concat(s.state.currentPeerUser.id):s.groupChatId="".concat(s.state.currentPeerUser.id,"-").concat(s.currentUserId),s.removeListener=k.firestore().collection("Messages").doc(s.groupChatId).collection(s.groupChatId).onSnapshot((function(e){e.docChanges().forEach((function(e){e.type===x.DOC&&s.listMessage.push(e.doc.data())})),s.setState({isLoading:!1})}),(function(e){s.props.showToast(0,e.toString())}))},s.onSendMessage=function(e,t){if(s.state.isShowSticker&&2===t&&s.setState({isShowSticker:!1}),""!==e.trim()){var a=M()().valueOf().toString(),i={idFrom:s.currentUserId,idTo:s.state.currentPeerUser.id,timestamp:a,content:e.trim(),type:t};k.firestore().collection("Messages").doc(s.groupChatId).collection(s.groupChatId).doc(a).set(i).then((function(){s.setState({inputValue:""})}))}},s.onChoosePhoto=function(e){e.target.files&&e.target.files[0]?(s.setState({isLoading:!0}),s.currentPhotoFile=e.target.files[0],0===e.target.files[0].type.toString().indexOf("image/")?s.uploadPhoto():(s.setState({isLoading:!1}),s.props.showToast(0,"This is not an image"))):s.setState({isLoading:!1})},s.uploadPhoto=function(){if(s.currentPhotoFile){var e=M()().valueOf().toString(),t=k.storage().ref().child(e).put(s.currentPhotoFile);t.on(x.UPLOAD_CHANGED,null,(function(e){s.setState({isLoading:!1}),s.props.showToast(0,e.message)}),(function(){t.snapshot.ref.getDownloadURL().then((function(e){s.onSendMessage(e,1),s.setState({isLoading:!1})}))}))}else s.setState({isLoading:!1}),s.props.showToast(0,"File is null")},s.renderListMessage=function(){if(s.listMessage.length>0){var e=[];return s.listMessage.forEach((function(t,a){t.idFrom===s.currentUserId?0===t.type?e.push(Object(g.jsx)("div",{className:"viewItemRight",children:Object(g.jsx)("span",{className:"textContentItem",children:t.content})},t.timestamp)):1===t.type?e.push(Object(g.jsx)("div",{className:"viewItemRight2",children:Object(g.jsx)("img",{className:"imgItemRight",src:t.content,alt:"content message"})},t.timestamp)):e.push(Object(g.jsx)("div",{className:"viewItemRight3",children:Object(g.jsx)("img",{className:"imgItemRightSticker",src:s.getGifImage(t.content),alt:"content message"})},t.timestamp)):0===t.type?e.push(Object(g.jsxs)("div",{className:"viewWrapItemLeft",children:[Object(g.jsxs)("div",{className:"viewWrapitemleft3",children:[s.isLastMessageLeft(a)?Object(g.jsx)("img",{src:s.state.currentPeerUser.URL?s.state.currentPeerUser.URL:"https://firebasestorage.googleapis.com/v0/b/react-applciation.appspot.com/o/nopic.jpg?alt=media&token=b4bbcf51-a6b2-4715-9699-8b26b2cf6c8b",alt:"avatar",className:"peerAvatarLeft"}):Object(g.jsx)("div",{className:"viewPaddingLeft"}),Object(g.jsx)("div",{classNam:"viewItemLeft",children:Object(g.jsx)("span",{className:"textContentItem",children:t.content})})]}),s.isLastMessageLeft(a)?Object(g.jsx)("span",{className:"textTimeLeft",children:Object(g.jsx)("div",{className:"time",children:M()(Number(t.timestamp)).format("11")})}):null]},t.timestamp)):1===t.type?e.push(Object(g.jsxs)("div",{className:"viewWrapitemLeft2",children:[Object(g.jsxs)("div",{className:"viewWrapItemleft3",children:[s.isLastMessageLeft(a)?Object(g.jsx)("img",{src:s.state.currentPeerUser.URL?s.state.currentPeerUser.URL:"https://firebasestorage.googleapis.com/v0/b/react-applciation.appspot.com/o/nopic.jpg?alt=media&token=b4bbcf51-a6b2-4715-9699-8b26b2cf6c8b",alt:"avatar",className:"peerAvatarLeft"}):Object(g.jsx)("div",{className:"vewPaddingLeft"}),Object(g.jsx)("div",{className:"viewItemLeft2",children:Object(g.jsx)("img",{className:"imgItemLeft",src:t.content,alt:"content message"})})]}),s.isLastMessageLeft(a)?Object(g.jsx)("span",{className:"textTimeLeft",children:Object(g.jsx)("div",{className:"time",children:M()(Number(t.timestamp)).format("11")})}):null]},t.timestamp)):e.push(Object(g.jsxs)("div",{className:"viewWrapItemleft2",children:[Object(g.jsxs)("div",{className:"viewWrapitemLeft3",children:[s.isLastMessageLeft(a)?Object(g.jsx)("img",{src:s.state.currentPeerUser.URL?s.state.currentPeerUser.URL:"https://firebasestorage.googleapis.com/v0/b/react-applciation.appspot.com/o/nopic.jpg?alt=media&token=b4bbcf51-a6b2-4715-9699-8b26b2cf6c8b",alt:"avatar",className:"peerAvatarLeft"}):Object(g.jsx)("div",{className:"vewPaddingLeft"}),Object(g.jsx)("div",{className:"viewItemLeft3",children:Object(g.jsx)("img",{className:"imgItemLeftSticker",src:s.getGifImage(t.content),alt:"content message"})},t.timestamp)]}),s.isLastMessageLeft(a)?Object(g.jsx)("span",{className:"textTimeLeft",children:Object(g.jsx)("div",{className:"time",children:M()(Number(t.timestamp)).format("11")})}):null]},t.timestamp))})),e}return Object(g.jsxs)("div",{className:"viewWrapSayHi",children:[Object(g.jsx)("span",{className:"textSayHi",children:" No messages"}),Object(g.jsx)("img",{className:"imgWaveHand",src:"https://firebasestorage.googleapis.com/v0/b/react-applciation.appspot.com/o/14-wave_hand.png?alt=media&token=2c115c7b-a321-4c76-8fce-28dfec02e3e3",alt:"wave hand"})]})},s.renderStickers=function(){return Object(g.jsxs)("div",{className:"viewStickers",children:[Object(g.jsx)("img",{className:"imgSticker",src:"https://firebasestorage.googleapis.com/v0/b/react-applciation.appspot.com/o/l1.png?alt=media&token=093c65b0-3791-4733-99f7-673e8ed75e2b",alt:"sticker",onClick:function(){s.onSendMessage("lego1",2)}}),Object(g.jsx)("img",{className:"imgSticker",src:"https://firebasestorage.googleapis.com/v0/b/react-applciation.appspot.com/o/l2.png?alt=media&token=3e3c5f79-4448-4226-bfbe-12e7fcb5c89a",alt:"sticker",onClick:function(){s.onSendMessage("lego2",2)}}),Object(g.jsx)("img",{className:"imgSticker",src:"https://firebasestorage.googleapis.com/v0/b/react-applciation.appspot.com/o/l3.png?alt=media&token=6669ccc8-172f-49f0-86d0-cd4e75ad6ec9",alt:"sticker",onClick:function(){s.onSendMessage("lego3",2)}}),Object(g.jsx)("img",{className:"imgSticker",src:"https://firebasestorage.googleapis.com/v0/b/react-applciation.appspot.com/o/l4.png?alt=media&token=4997b6d8-c857-40bc-9857-08e59cb68f82",alt:"sticker",onClick:function(){s.onSendMessage("lego4",2)}}),Object(g.jsx)("img",{className:"imgSticker",src:"https://firebasestorage.googleapis.com/v0/b/react-applciation.appspot.com/o/l5.png?alt=media&token=dc08b6f1-c4e8-43e3-96aa-98b22dbb360c",alt:"sticker",onClick:function(){s.onSendMessage("lego5",2)}}),Object(g.jsx)("img",{className:"imgSticker",src:"https://firebasestorage.googleapis.com/v0/b/react-applciation.appspot.com/o/l6.png?alt=media&token=0f813257-f19d-411d-a332-0d471158ef98",alt:"sticker",onClick:function(){s.onSendMessage("lego6",2)}}),Object(g.jsx)("img",{className:"imgSticker",src:"https://firebasestorage.googleapis.com/v0/b/react-applciation.appspot.com/o/m1.gif?alt=media&token=664cdc3f-fda7-4ae3-845f-eacf4fad7411",alt:"sticker",onClick:function(){s.onSendMessage("mimi1",2)}}),Object(g.jsx)("img",{className:"imgSticker",src:"https://firebasestorage.googleapis.com/v0/b/react-applciation.appspot.com/o/m2.gif?alt=media&token=78a7a97b-2d2e-49a8-b31d-3bcb94a05877",alt:"sticker",onClick:function(){s.onSendMessage("mimi2",2)}}),Object(g.jsx)("img",{className:"imgSticker",src:"https://firebasestorage.googleapis.com/v0/b/react-applciation.appspot.com/o/m3.gif?alt=media&token=ac40c29a-86bd-4149-b052-e100ed659fc2",alt:"sticker",onClick:function(){s.onSendMessage("mimi3",2)}})]})},s.getGifImage=function(e){switch(e){case"l1":return"https://firebasestorage.googleapis.com/v0/b/react-applciation.appspot.com/o/l1.png?alt=media&token=093c65b0-3791-4733-99f7-673e8ed75e2b";case"l2":return"https://firebasestorage.googleapis.com/v0/b/react-applciation.appspot.com/o/l2.png?alt=media&token=3e3c5f79-4448-4226-bfbe-12e7fcb5c89a";case"l3":return"https://firebasestorage.googleapis.com/v0/b/react-applciation.appspot.com/o/l3.png?alt=media&token=6669ccc8-172f-49f0-86d0-cd4e75ad6ec9";case"l4":return"https://firebasestorage.googleapis.com/v0/b/react-applciation.appspot.com/o/l4.png?alt=media&token=4997b6d8-c857-40bc-9857-08e59cb68f82";case"l5":return"https://firebasestorage.googleapis.com/v0/b/react-applciation.appspot.com/o/l5.png?alt=media&token=dc08b6f1-c4e8-43e3-96aa-98b22dbb360c";case"l6":return"https://firebasestorage.googleapis.com/v0/b/react-applciation.appspot.com/o/l6.png?alt=media&token=0f813257-f19d-411d-a332-0d471158ef98";case"l7":return"https://firebasestorage.googleapis.com/v0/b/react-applciation.appspot.com/o/l7.png?alt=media&token=7546238b-f550-4444-9b96-635f8319259e";case"l8":return"https://firebasestorage.googleapis.com/v0/b/react-applciation.appspot.com/o/l8.png?alt=media&token=697319de-0d70-417f-87fe-fbc26fb4a0fc";case"m1":return"https://firebasestorage.googleapis.com/v0/b/react-applciation.appspot.com/o/m1.gif?alt=media&token=664cdc3f-fda7-4ae3-845f-eacf4fad7411";case"m2":return"https://firebasestorage.googleapis.com/v0/b/react-applciation.appspot.com/o/m2.gif?alt=media&token=78a7a97b-2d2e-49a8-b31d-3bcb94a05877";case"m3":return"https://firebasestorage.googleapis.com/v0/b/react-applciation.appspot.com/o/m3.gif?alt=media&token=ac40c29a-86bd-4149-b052-e100ed659fc2";case"m4":return"https://firebasestorage.googleapis.com/v0/b/react-applciation.appspot.com/o/m4.gif?alt=media&token=083d396e-4122-4081-9a08-d3c4b8bc1ab5";case"m5":return"https://firebasestorage.googleapis.com/v0/b/react-applciation.appspot.com/o/m5.gif?alt=media&token=f67e890b-0c48-4d86-861c-0fe08458c7b0"}},s.hashString=function(e){for(var t=0,a=0;a<e.length;a++)t+=Math.pow(31*e.charCodeAt(a),e.length-a),t&=t;return t},s.isLastMessageLeft=function(e){return e+1<s.listMessage.length&&s.listMessage[e+1].idFrom===s.currentUserId||e===s.listMessage.length-1},s.isLastMessageRight=function(e){return e+1<s.listMessage.length&&s.listMessage[e+1].idFrom!==s.currentUserId||e===s.listMessage.length-1},s.state={isLoading:!1,isShowSticker:!1,inputValue:"",currentPeerUser:s.props.currentPeerUser},s.currentUserName=localStorage.getItem(x.Name),s.currentUserId=localStorage.getItem(x.ID),s.currentUserPhoto=localStorage.getItem(x.PhotoURL),s.currentUserDocumentId=localStorage.getItem(x.FirebaseDocumentId),s.stateChanged=x.UPLOAD_CHANGED,s.listMessage=[],s.removeListener=null,s.groupChatId=null,s.currentPhotoFile=null,s}return Object(l.a)(a,[{key:"componentDidUpdate",value:function(){this.scrollToBottom()}},{key:"componentDidMount",value:function(){this.getListHistory()}},{key:"componentWillUnmount",value:function(){this.removeListener&&this.removeListener()}},{key:"render",value:function(){var e=this;return Object(g.jsxs)("div",{className:"content",children:[this.state.isLoading?Object(g.jsx)("div",{className:"viewLoadingProfile",children:Object(g.jsx)(S.a,{type:"spin",color:"pink",height:"10%",width:"10%"})}):null,Object(g.jsxs)("div",{class:"contact-profile",children:[Object(g.jsx)("img",{src:this.state.currentPeerUser.URL?this.state.currentPeerUser.URL:"https://firebasestorage.googleapis.com/v0/b/react-applciation.appspot.com/o/nopic.jpg?alt=media&token=b4bbcf51-a6b2-4715-9699-8b26b2cf6c8b"}),Object(g.jsx)("p",{children:this.currentPeerUser.name}),Object(g.jsxs)("div",{class:"social-media",children:[Object(g.jsx)("i",{class:"fa fa-facebook","aria-hidden":"true"}),Object(g.jsx)("i",{class:"fa fa-twitter","aria-hidden":"true"}),Object(g.jsx)("i",{class:"fa fa-instagram","aria-hidden":"true"})]})]}),Object(g.jsxs)("div",{className:"viewListContentChat",children:[this.renderListMessage(),Object(g.jsx)("div",{styles:{float:"left",clear:"both"},ref:function(t){e.messagesEnd=t}})]}),this.state.isShowSticker?this.renderStickers():null,Object(g.jsx)("div",{className:"message-input",children:Object(g.jsxs)("div",{class:"wrap",children:[Object(g.jsx)("input",{className:"viewInput",placeholder:"Type a message",value:this.state.inputValue,onChange:function(t){e.setState({inputValue:t.target.value})},onKeyPress:this.onKeyboardPress}),Object(g.jsx)("img",{className:"icOpenGallery",src:"https://firebasestorage.googleapis.com/v0/b/react-applciation.appspot.com/o/ic_photo.png?alt=media&token=0bd7a403-b3b3-44e6-a688-d45fc84ffc76",alt:"icon open gallery",onClick:function(){return e.refInput.click()}}),Object(g.jsx)("input",{ref:function(t){e.refInput=t},accept:"image/*",className:"viewInputGallery",type:"file",onChange:this.onChoosePhoto}),Object(g.jsx)("img",{className:"icOpenSticker",src:"https://firebasestorage.googleapis.com/v0/b/react-applciation.appspot.com/o/ic_sticker.png?alt=media&token=ed8a6583-bff3-49f1-aa0d-901174eb33e8",alt:"icon open sticker",onClick:this.openListSticker}),Object(g.jsx)("img",{className:"icSend",src:"https://firebasestorage.googleapis.com/v0/b/react-applciation.appspot.com/o/ic_send.png?alt=media&token=b90c1181-d62c-4c3c-9feb-ea7c074bbc5b",alt:"icon send",onClick:function(){return e.onSendMessage(e.state.inputValue,0)}})]})})]})}}],[{key:"getDerivedStateFromProps",value:function(e,t){if(e.currentPeerUser!==t.currentPeerUser)return{currentPeerUser:e.currentPeerUser}}}]),a}(i.a.Component),T=function(e){Object(d.a)(a,e);var t=Object(p.a)(a);function a(e){var s;return Object(r.a)(this,a),(s=t.call(this,e)).getListusers=Object(C.a)(N.a.mark((function e(){var t;return N.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,k.firestore().collection("users").get();case 2:(t=e.sent).docs.length>0&&([],Object(y.a)(t.docs).forEach((function(e,t){s.searchUsers.push({key:t,documentkdy:e.id,id:e.data().id,name:e.data().name,URL:e.data().URL,description:e.data().description})})),s.setState({displayedContacts:s.searchUsers}));case 4:case"end":return e.stop()}}),e)}))),s.logout=function(){k.auth().signOut(),s.props.history.push("/"),localStorage.clear()},s.onProfileClick=function(){s.props.history.push("/profile")},s.searchHandler=function(e){var t=e.target.value.toLowerCase(),a=s.searchUsers.filter((function(e){return-1!==e.name.toLowerCase().indexOf(t)}));s.setState({displayedContacts:a})},s.state={currentPeerUser:null,displayedContacts:[]},s.searchUsers=[],s.currentUserDocumentId=localStorage.getItem(x.FirebaseDocumentId),s.currentUserId=localStorage.getItem(x.ID),s.currentUserPhoto=localStorage.getItem(x.PhotoURL),s.currentUserName=localStorage.getItem(x.Name),s.getListusers=s.getListusers.bind(Object(f.a)(s)),s.searchHandler=s.searchHandler.bind(Object(f.a)(s)),s}return Object(l.a)(a,[{key:"componentDidMount",value:function(){this.getListusers()}},{key:"render",value:function(){var e=this;return Object(g.jsxs)("div",{id:"frame",children:[Object(g.jsxs)("div",{id:"sidepanel",children:[Object(g.jsx)("div",{id:"profile",children:Object(g.jsxs)("div",{class:"wrap",children:[Object(g.jsx)("img",{id:"profile-img",src:this.currentUserPhoto?this.currentUserPhoto:"https://firebasestorage.googleapis.com/v0/b/react-applciation.appspot.com/o/nopic.jpg?alt=media&token=d375ecd2-5905-4dee-8185-b351701915d0"}),Object(g.jsx)("p",{children:this.currenUserName}),Object(g.jsx)("div",{id:"status-options",children:Object(g.jsxs)("ul",{children:[Object(g.jsxs)("li",{id:"status-online",class:"active",children:[Object(g.jsx)("span",{class:"status-circle"}),Object(g.jsx)("p",{children:"online"})]}),Object(g.jsxs)("li",{id:"status-away",children:[Object(g.jsx)("span",{class:"status-circle"}),Object(g.jsx)("p",{children:"Away"})]}),Object(g.jsxs)("li",{id:"status-busy",children:[Object(g.jsx)("span",{class:"status-circle"}),Object(g.jsx)("p",{children:"Busy"})]}),Object(g.jsxs)("li",{id:"status-offline",children:[Object(g.jsx)("span",{class:"status-circle"}),Object(g.jsx)("p",{children:"Offline"})]})]})}),Object(g.jsxs)("div",{id:"expanded",children:[Object(g.jsx)("label",{for:"twitter",children:Object(g.jsx)("i",{class:"fa fa-facebook fa-fw","aria-hidden":"true"})}),Object(g.jsx)("input",{name:"twitter",type:"text",value:"mikeross"}),Object(g.jsx)("label",{for:"twitter",children:Object(g.jsx)("i",{class:"fa fa-twitter fa-fw","aria-hidden":"true"})}),Object(g.jsx)("input",{name:"twitter",type:"text",value:"ross81"}),Object(g.jsx)("label",{for:"twitter",children:Object(g.jsx)("i",{class:"fa fa-instagram fa-fw","aria-hidden":"true"})}),Object(g.jsx)("input",{name:"twitter",type:"text",value:"mike.ross"})]})]})}),Object(g.jsxs)("div",{id:"search",children:[Object(g.jsx)("label",{for:"",children:Object(g.jsx)("i",{class:"fa fa-search","aria-hidden":"true"})}),Object(g.jsx)("input",{class:"input-field",type:"text",onChange:this.searchHandler,placeholder:"Search"})]}),Object(g.jsx)("div",{id:"contacts",children:Object(g.jsx)("ul",{style:{listStyleType:"none",margin:"0",padding:"0"},children:this.state.displayedContacts?this.state.displayedContacts.map((function(t){return t.id!=e.currentUserId?Object(g.jsx)("li",{class:"contact",onClick:function(){e.setState({currentPeerUser:t})},children:Object(g.jsxs)("div",{class:"wrap",children:[Object(g.jsx)("span",{class:"contact-status online"}),Object(g.jsx)("img",{src:t.URL?t.URL:"https://firebasestorage.googleapis.com/v0/b/react-applciation.appspot.com/o/nopic.jpg?alt=media&token=d375ecd2-5905-4dee-8185-b351701915d0"}),Object(g.jsxs)("div",{class:"meta",children:[Object(g.jsx)("p",{class:"name",children:t.name}),Object(g.jsx)("p",{class:"preview",children:t.description?t.description:" I am busy....."})]})]})}):console.log("no user Found")})):console.log("No user Found")})}),Object(g.jsxs)("div",{id:"bottom-bar",children:[Object(g.jsxs)("button",{id:"logout",onClick:this.logout,children:[Object(g.jsx)("i",{class:"fa fa-sign-out","aria-hidden":"true"}),Object(g.jsx)("span",{children:"Logout"})]}),Object(g.jsxs)("button",{id:"settings",onClick:this.onProfileClick,children:[Object(g.jsx)("i",{class:"fa fa-cog fa-fw","aria-hidden":"true"}),Object(g.jsx)("span",{children:"Profile"})]})]})]}),this.state.currentPeerUser?Object(g.jsx)(D,{currentPeerUser:this.state.currentPeerUser,showToast:this.props.showToast}):Object(g.jsx)(U,{currentUserName:this.currentUserName,currentUserPhoto:this.currentUserPhoto})]})}}]),a}(i.a.Component),R=a(34),A=(a(83),function(e){Object(d.a)(a,e);var t=Object(p.a)(a);function a(e){var s;return Object(r.a)(this,a),(s=t.call(this,e)).state={isLoading:!1,email:"",password:""},s.handleChange=s.handleChange.bind(Object(f.a)(s)),s.handleSubmit=s.handleSubmit.bind(Object(f.a)(s)),s}return Object(l.a)(a,[{key:"componentDidMount",value:function(){localStorage.getItem(x.ID)?(this.setState({isLoading:!0}),this.props.showToast(1,"Login Succes"),this.props.history.push("./chat")):this.setState({isLoading:!1})}},{key:"handleChange",value:function(e){this.setState(Object(R.a)({},e.target.name,e.target.value))}},{key:"handleSubmit",value:function(){var e=Object(C.a)(N.a.mark((function e(t){var a=this;return N.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t.preventDefault(),this.setState({isLoading:!0}),e.prev=2,e.next=5,k.auth().signInWithEmailAndPassword(this.state.email,this.state.password).then(function(){var e=Object(C.a)(N.a.mark((function e(t){var s;return N.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!(s=t.user)){e.next=4;break}return e.next=4,k.firestore().collection("users").where("id","==",s.uid).get().then((function(e){e.forEach((function(e){localStorage.setItem(x.FirebaseDocumentId,e.id),localStorage.setItem(x.ID,e.data().id),localStorage.setItem(x.Name,e.data().name),localStorage.setItem(x.Email,e.data().email),localStorage.setItem(x.PhotoURL,e.data().URL),localStorage.setItem(x.Description,e.data().description)}))}));case 4:a.props.history.push("/chat"),a.setState({isLoading:!1});case 6:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()).catch((function(e){document.getElementById("1").innerHTML="incorrect email/password or poor internet"}));case 5:e.next=10;break;case 7:e.prev=7,e.t0=e.catch(2),console.log("Failed To Authenticate");case 10:case"end":return e.stop()}}),e,this,[[2,7]])})));return function(t){return e.apply(this,arguments)}}()},{key:"render",value:function(){return Object(g.jsxs)(u.a,{container:!0,component:"main",className:"root",children:[Object(g.jsx)(u.a,{item:!0,xs:1,sm:4,md:7,className:"image",children:Object(g.jsx)("div",{className:"leftimage",children:this.state.isLoading?Object(g.jsx)("div",{className:"viewLoadingProfile",children:Object(g.jsx)(S.a,{type:"spin",color:"#203152",height:"10%",width:"10%"})}):null})}),Object(g.jsxs)(u.a,{item:!0,xs:12,sm:8,md:5,className:"loginrightcomponent",elevation:6,square:!0,children:[Object(g.jsx)(b.a,{style:{display:"flex",flexDirection:"column",alignItems:"center",width:"100%",boxShadow:"0 5px 5px #808888"},children:Object(g.jsx)(m.b,{to:"/",children:Object(g.jsx)("button",{class:"btnhome",children:Object(g.jsx)("i",{class:"fa fa-home",children:"Go to Home"})})})}),Object(g.jsx)("div",{style:{display:"flex",flexDirection:"column",alignItems:"center",paddingLeft:"10px",paddingRight:"10px",marginTop:"10px"},children:Object(g.jsxs)("form",{style:{marginTop:"50px",width:"100%"},noValidate:!0,onSubmit:this.handleSubmit,children:[Object(g.jsx)(O.a,{variant:"outlined",margin:"normal",required:!0,fullWidth:!0,id:"email",label:"Email Address",name:"email",autoComplete:"email",autoFocus:!0,onChange:this.handleChange,value:this.state.email}),Object(g.jsx)(O.a,{variant:"outlined",margin:"normal",required:!0,fullWidth:!0,id:"password",label:"Password",type:"password",name:"password",autoComplete:"current-password",autoFocus:!0,onChange:this.handleChange,value:this.state.password}),Object(g.jsxs)("div",{className:"CenterAliningItems",children:[Object(g.jsx)("button",{className:"button1",type:"submit",children:Object(g.jsx)("span",{children:"Login"})}),Object(g.jsx)(m.b,{to:"/signup",variant:"body2",children:Object(g.jsx)("button",{className:"button1",children:"Signup"})})]}),Object(g.jsx)("div",{children:Object(g.jsx)("p",{id:"1",style:{color:"red"}})})]})})]})]})}}]),a}(i.a.Component)),F=(a(84),function(e){Object(d.a)(a,e);var t=Object(p.a)(a);function a(e){var s;return Object(r.a)(this,a),(s=t.call(this,e)).state={isLoading:!1,email:"",password:"",name:""},s.handleChange=s.handleChange.bind(Object(f.a)(s)),s.handleSubmit=s.handleSubmit.bind(Object(f.a)(s)),s}return Object(l.a)(a,[{key:"handleChange",value:function(e){this.setState(Object(R.a)({},e.target.name,e.target.value))}},{key:"handleSubmit",value:function(){var e=Object(C.a)(N.a.mark((function e(t){var a,s,i,n,c=this;return N.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=this.state,s=a.name,i=a.password,n=a.email,t.preventDefault(),this.setState({isLoading:!0}),e.prev=3,e.next=6,k.auth().createUserWithEmailAndPassword(n,i).then(function(){var e=Object(C.a)(N.a.mark((function e(t){return N.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,k.firestore().collection("users").add({name:s,id:t.user.uid,email:n,password:i,URL:"",description:""}).then((function(e){localStorage.setItem(x.FirebaseDocumentId,e.id),localStorage.setItem(x.ID,t.user.uid),localStorage.setItem(x.Name,s),localStorage.setItem(x.Email,n),localStorage.setItem(x.PhotoURL,""),localStorage.setItem(x.Description,""),c.setState({isLoading:!1}),c.props.history.push("/chat")})).catch((function(e){document.getElementById("1").innerHTML="User Already exit or poor internet"}));case 2:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}());case 6:e.next=11;break;case 8:e.prev=8,e.t0=e.catch(3),console.log("Failed To Authenticate");case 11:case"end":return e.stop()}}),e,this,[[3,8]])})));return function(t){return e.apply(this,arguments)}}()},{key:"render",value:function(){return Object(g.jsxs)(u.a,{container:!0,component:"main",className:"root",children:[Object(g.jsx)(u.a,{item:!0,xs:1,sm:4,md:7,className:"image",children:Object(g.jsx)("div",{className:"leftimage",children:this.state.isLoading?Object(g.jsx)("div",{className:"viewLoadingProfile",children:Object(g.jsx)(S.a,{type:"spin",color:"#203152",height:"10%",width:"10%"})}):null})}),Object(g.jsxs)(u.a,{item:!0,xs:12,sm:8,md:5,className:"loginrightcomponent",elevation:6,square:!0,children:[Object(g.jsx)(b.a,{style:{display:"flex",flexDirection:"column",alignItems:"center",width:"100%",boxShadow:"0 5px 5px #808888"},children:Object(g.jsx)(m.b,{to:"/",children:Object(g.jsx)("button",{class:"btnhome",children:Object(g.jsx)("i",{class:"fa fa-home",children:"Go to Home"})})})}),Object(g.jsx)("div",{style:{display:"flex",flexDirection:"column",alignItems:"center",paddingLeft:"10px",paddingRight:"10px",marginTop:"10px"},children:Object(g.jsxs)("form",{style:{marginTop:"50px",width:"100%"},noValidate:!0,onSubmit:this.handleSubmit,children:[Object(g.jsx)(O.a,{variant:"outlined",margin:"normal",required:!0,fullWidth:!0,id:"email",label:"Email Address",name:"email",autoComplete:"email",autoFocus:!0,onChange:this.handleChange,value:this.state.email}),Object(g.jsx)(O.a,{variant:"outlined",margin:"normal",required:!0,fullWidth:!0,id:"password",label:"Password :length Greater than 6",name:"password",type:"password",autoComplete:"current-password",autoFocus:!0,onChange:this.handleChange,value:this.state.password}),Object(g.jsx)(O.a,{variant:"outlined",margin:"normal",required:!0,fullWidth:!0,id:"name",label:"Your Name",name:"name",autoComplete:"name",autoFocus:!0,onChange:this.handleChange,value:this.state.name}),Object(g.jsx)("div",{children:Object(g.jsx)("p",{style:{color:"grey",fontSize:"15px"},children:"Please fill all fields and password should be greater than 6"})}),Object(g.jsx)("div",{className:"CenterAliningItems",children:Object(g.jsx)("button",{className:"button1",type:"submit",children:"Signup"})}),Object(g.jsx)("div",{children:Object(g.jsx)("p",{id:"1",style:{color:"red"}})})]})})]})]})}}]),a}(i.a.Component)),E=a(42),W=function(e){Object(d.a)(a,e);var t=Object(p.a)(a);function a(){var e;Object(r.a)(this,a);for(var s=arguments.length,i=new Array(s),n=0;n<s;n++)i[n]=arguments[n];return(e=t.call.apply(t,[this].concat(i))).showToast=function(e,t){switch(e){case 0:E.b.warning(t);break;case 1:E.b.success(t)}},e}return Object(l.a)(a,[{key:"render",value:function(){var e=this;return Object(g.jsxs)(m.a,{children:[Object(g.jsx)(E.a,{autoClose:2e3,hideProgressBar:!0,position:E.b.POSITION.TOP_CENTER}),Object(g.jsxs)(h.c,{children:[Object(g.jsx)(h.a,{exact:!0,path:"/",render:function(e){return Object(g.jsx)(j,Object(o.a)({},e))}}),Object(g.jsx)(h.a,{path:"/signin",render:function(t){return Object(g.jsx)(A,Object(o.a)({showToast:e.showToast},t))}}),Object(g.jsx)(h.a,{path:"/signup",render:function(t){return Object(g.jsx)(F,Object(o.a)({showToast:e.showToast},t))}}),Object(g.jsx)(h.a,{path:"/profile",render:function(t){return Object(g.jsx)(L,Object(o.a)({showToast:e.showToast},t))}}),Object(g.jsx)(h.a,{path:"/chat",render:function(t){return Object(g.jsx)(T,Object(o.a)({showToast:e.showToast},t))}})]})]})}}]),a}(s.Component),H=function(e){e&&e instanceof Function&&a.e(3).then(a.bind(null,121)).then((function(t){var a=t.getCLS,s=t.getFID,i=t.getFCP,n=t.getLCP,c=t.getTTFB;a(e),s(e),i(e),n(e),c(e)}))};c.a.render(Object(g.jsx)(i.a.StrictMode,{children:Object(g.jsx)(W,{})}),document.getElementById("root")),H()}},[[85,1,2]]]);
//# sourceMappingURL=main.a36cabd1.chunk.js.map